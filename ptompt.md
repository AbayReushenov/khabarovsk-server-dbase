# Cursor AI Pro Prompt: Backend Generation (Step 2)

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –∫–æ–¥–∞ –≤ **Cursor AI Pro**.
–û–Ω —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Python-–±—ç–∫–µ–Ω–¥ (FastAPI + Supabase Postgres + GigaChat) –∏ —Å—Ä–∞–∑—É –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render. –¢–µ–∫—Å—Ç –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª –≤ –æ–∫–Ω–æ –∑–∞–¥–∞–Ω–∏—è Cursor AI Pro.

## üìÑ Prompt

```markdown
### –ó–∞–¥–∞–Ω–∏–µ

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Ä–∞–±–æ—á–∏–π backend-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ Python 3.11 c –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π FastAPI ‚Üí Supabase (PostgreSQL) ‚Üí GigaChat. –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è MVP-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´Habarovsk Forecast Buddy¬ª (–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ –ø—É—Ö–æ–≤–∏–∫–æ–≤).

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è**

1. **–°—Ç–µ–∫**
   - FastAPI 1.0+
   - Pydantic 2.x
   - pandas 2.x
   - psycopg2-binary
   - python-multipart
   - gigachat (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK)
   - dotenv
2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤**

```
project/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ endpoints.py       # upload_csv, forecast, health, data, history
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py         # Pydantic models
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase_client.py # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gigachat_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv_service.py     # –≤–∞–ª–∏–¥–∞—Ü–∏—è/–ø–∞—Ä—Å–∏–Ω–≥ CSV
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ forecast_service.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ logger.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ test_health.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ README.md
```

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - POST `/upload-csv` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ CSV, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `sales_data`
   - POST `/forecast` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ (7 | 14 | 30 –¥–Ω–µ–π) —á–µ—Ä–µ–∑ GigaChat, –∑–∞–ø–∏—Å—å –≤ `forecasts`
   - GET  `/data/{sku_id}` ‚Äî –≤—ã–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 52 –∑–∞–ø–∏—Å–µ–π
   - GET  `/forecast-history/{sku_id}` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
   - GET  `/health` ‚Äî ping –¥–ª—è Render health check

4. **Supabase**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `SUPABASE_URL`, `SUPABASE_SERVICE_KEY`
   - –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ psycopg2, –∞ –Ω–µ —á–µ—Ä–µ–∑ JS SDK
   - –¢–∞–±–ª–∏—Ü—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã (sales_data, forecasts, user_inputs) ‚Äî –æ–ø–∏—Å–∞—Ç—å ORM-like helpers

5. **GigaChat**
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `GIGACHAT_CREDENTIALS`
   - –ö–ª–∞—Å—Å `GigaChatService.generate_forecast()` —Å—Ç—Ä–æ–∏—Ç prompt –ø–æ —à–∞–±–ª–æ–Ω—É few-shot, –æ—Ç–¥–∞–µ—Ç JSON
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫ SDK

6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å / RLS**
   - –ó–∞–ø—Ä–æ—Å—ã –∫ Supabase –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º service-key; –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –∏ SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (MVP)

7. **Docker**
   - –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ `python:3.11-slim`
   - –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:
     `uvicorn app.main:app --host 0.0.0.0 --port 8000`
   - Expose 8000

8. **GitHub Actions**
   - Workflow `deploy.yml` –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è –≤ Render
     *—Ç–µ—Å—Ç—ã ‚Üí docker build ‚Üí push*

9. **README.md**
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ env, –ø—Ä–∏–º–µ—Ä curl-–∑–∞–ø—Ä–æ—Å–æ–≤

10. **Code style**
    - Docstrings Google-style
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `logging` –≤ `utils/logger.py`

### –í—ã—Ö–æ–¥ Cursor AI Pro

1. –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –≤ –æ–¥–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
2. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `requirements.txt`, `Dockerfile`, `.env.example`
3. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ unit-—Ç–µ—Å—Ç—ã (`tests/test_health.py` ‚Üí –æ–∂–∏–¥–∞–µ—Ç 200 OK)

**–ù–µ –≤–∫–ª—é—á–∞–π —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏.** –î–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞–≤—å –∑–∞–≥–ª—É—à–∫–∏ `""`.
–ö–æ–¥ –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ `docker build` –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å `pytest` –±–µ–∑ –æ—à–∏–±–æ–∫.
```

## –ß—Ç–æ —É–∂–µ —É—á—Ç–µ–Ω–æ

| –ë–ª–æ–∫             | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------------|--------|-------------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î     | ‚úî      | –¢–∞–±–ª–∏—Ü—ã –∏ RLS —Å–æ–∑–¥–∞–Ω—ã –≤ —à–∞–≥–µ 1 |
| API-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è | ‚úî      | –í prompt –∑–∞–ª–æ–∂–µ–Ω—ã –≤—Å–µ —ç–Ω–¥-–ø–æ–∏–Ω—Ç—ã |
| –õ–æ–≥–∏–∫–∞ CSV       | ‚úî      | `csv_service.py` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏ –ø–∏—à–µ—Ç –≤ `sales_data` |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è LLM   | ‚úî      | –ö–ª–∞—Å—Å `GigaChatService` + –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON-–æ—Ç–≤–µ—Ç–∞ |
| –î–µ–ø–ª–æ–π           | ‚úî      | Dockerfile –∏ GitHub Actions –¥–ª—è Render |

## –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–∑–∂–µ

1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å Supabase JWT –∏ RLS-–ø–æ–ª–∏—Ç–∏–∫—É per-user.
2. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤** ‚Äî Redis Cloud Free (30 MB).
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî Render Metrics + Evidently AI.
4. **Rate Limiting** ‚Äî fastapi-limiter –Ω–∞ Redis.

> –°–∫–æ–ø–∏—Ä—É–π—Ç–µ prompt –≤ –æ–∫–Ω–æ Cursor AI Pro, –¥–æ–∂–¥–∏—Ç–µ—Å—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –∑–∞—Ç–µ–º –ø–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub ‚Üí Render –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è.
